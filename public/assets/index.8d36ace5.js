var J=Object.defineProperty,X=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var D=(n,r,t)=>r in n?J(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,m=(n,r)=>{for(var t in r||(r={}))re.call(r,t)&&D(n,t,r[t]);if($)for(var t of $(r))te.call(r,t)&&D(n,t,r[t]);return n},R=(n,r)=>X(n,ee(r));import{j as e,F as f,a as s,s as k,r as T,a2 as o,a3 as l}from"./index.f022ae99.js";import{t as ne}from"./constants.c1eecf01.js";import{C as ae}from"./Toast.70369b00.js";import{S as M,D as ie}from"./SubmitButton.18840195.js";import{C as se,F as oe}from"./Card.0351a09c.js";import{R as le,G as ce}from"./Rocket.4f820f39.js";import{G as de}from"./Getter.1256fd36.js";import{u as U,c as ue,s as me}from"./store.d72acdd4.js";import{u as O,a as P}from"./index.esm.35511c71.js";import{u as _,S as W}from"./StatusHandler.6c4b40fd.js";import{a as pe,i as d,b as he}from"./StyledLabel.15a4e9de.js";import{T as C,I as x,E as F}from"./ErrorWarning.c5617eea.js";import{S as fe}from"./chakra-ui-select.esm.bc9f2787.js";import{b as be,E as K,S as ge,a as ye,G as Se}from"./SearchPlus.aa76161b.js";import{G as qe}from"./GetByParams.32ebc1fd.js";import{C as xe}from"./CodeBranch.053ae2b9.js";import"./chakra-ui-button.esm.2a2eabde.js";import"./chakra-ui-checkbox.esm.4c8ea808.js";const Ie="http://localhost:4000",N=pe.create({baseURL:Ie,withCredentials:!1});N.defaults.headers.common["Content-Type"]="application/json";const Q={size:"sm",type:"file",variant:"flushed"};async function we(n,r){try{const t=await N.post(n,r),{data:c}=t;return c}catch(t){return t==null?void 0:t.message}}async function ve(n,r,t){try{return(await N.put(`/${r}/${t}`,n)).data}catch(c){return c.message}}async function E(n){try{return(await N.get(n)).data}catch(r){return r.message}}function B({message:n,children:r}){return e(f,{children:e(C,{label:n,hasArrow:!0,arrowSize:15,children:r})})}function L(n){const{list:r,register:t,label:c,required:a}=n;return e(f,{children:e(fe,R(m({},t(c,{required:a})),{placeholder:"Select option",size:"xm",color:"#000000",children:r&&r.map((i,I)=>e("option",{value:i.id,children:i.email&&i.email||i.name&&i.name},I))}))})}const j=({label:n,register:r,required:t,errors:c,defaultValue:a,info:i})=>s(f,{children:[e(C,{label:i,hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^\d+$/,required:t,minLength:4,maxLength:4})))}),e(F,{label:n,errors:c,info:i})]}),q=({label:n,register:r,required:t,errors:c,defaultValue:a,info:i})=>s(f,{children:[e(C,{label:i,hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"text",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^[a-zA-Z\u00C0-\u017F\s]+$/,required:t})))}),e(F,{label:n,errors:c,info:i})]}),Y=({label:n,register:r,required:t,errors:c,defaultValue:a,info:i})=>s(f,{children:[e(C,{label:i,hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"tel",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{required:t,pattern:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{2,6}$/im})))}),e(F,{label:n,errors:c,info:i})]});let S=new Date().getFullYear();const Ce=new Date().getMonth()+1;S=parseInt(S.toString().substring(2,4));const Z=({register:n,errors:r,defaultValue:t,info:c})=>s(f,{children:[e(C,{label:"campo requerido de 11 d\xEDgitos",hasArrow:!0,arrowSize:15,children:e(x,m({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:t},n("ci",{required:!0,validate:{isOlder:a=>S-parseInt(a.substring(0,2))==18&&Ce>parseInt(a.substring(2,4))||S>parseInt(a.substring(0,2))&&S-parseInt(a.substring(0,2))>18||S<parseInt(a.substring(0,2))&&parseInt(a.substring(0,2))<99,min_month:a=>parseInt(a.substring(2,4))>=1,max_month:a=>parseInt(a.substring(2,4))<=12,min_day:a=>parseInt(a.substring(4,6))>=1,max_day:a=>parseInt(a.substring(4,6))<=31},minLength:11,maxLength:11})))}),e(F,{label:"ci",errors:r,info:c})]});function Fe(){var V;const n=U(ue),{stack:r}=n,t=U(me),[c,a]=T.exports.useState(""),{register:i,handleSubmit:I,formState:{errors:u}}=O(),w="/users/enabled/true",v="/empresas-instituciones/",y="representantes",{data:A}=_("users-enabled",()=>E(w)),{data:b}=_("companies",()=>E(v)),g=P(G=>ve(G,y,r.id)),z=(V=g==null?void 0:g.data)==null?void 0:V.message;return T.exports.useEffect(()=>{z&&a(z),z==="updated"&&t.setOption("mostrar")},[z]),e(f,{children:e(Ae,{children:s("form",{onSubmit:I(async G=>{g.mutateAsync(G)}),children:[e(o,{p:"1em",children:s(l,{children:[e(o,{children:e("label",{htmlFor:"title",children:e("p",{className:"form-title",children:"Actualizar representante:"})})}),e(p,{children:"Nro de Carnet del representante"}),e(Z,{required:!0,info:d.ci,errors:u,register:i,defaultValue:r.ci})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Tomo del representante"}),e(j,{info:d.tome,required:!0,label:"tome",errors:u,register:i,defaultValue:r.tome})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Folio del representante"}),e(j,{info:d.folio,required:!0,label:"folio",register:i,errors:u,defaultValue:r.folio})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Nombre y apellidos de representante"}),e(q,{info:d.name,label:"name",register:i,errors:u,required:!0,defaultValue:r.name})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Tel\xE9fono del representante"}),e(Y,{info:d.tel,label:"phone",register:i,errors:u,required:!0,defaultValue:r.phone})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Nombre y apellidos de quien lo nombra"}),e(q,{info:d.name,label:"namer",register:i,errors:u,required:!0,defaultValue:r.namer})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Cargo del que lo nombra"}),e(q,{info:d.occupancy,label:"namerCharge",register:i,errors:u,required:!0,defaultValue:r.namerCharger})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Adjunte el documento del nombramiento"}),e(B,{message:d.file,children:e(x,m(m({list:"representantes"},i("nominationTemplate")),Q))}),u.nominationTemplate&&e("span",{style:{color:"red"},children:"Field is required"})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:b==null?void 0:b.result,label:"eiId",register:i,required:!0}),u.eiId&&e("span",{style:{color:"red"},children:"Field is required"})]})}),e(o,{p:"1em",children:s(l,{children:[e(p,{children:"Seleccione usuario al que se vincula"}),e(L,{list:A==null?void 0:A.result,label:"userId",register:i,required:!0}),u.userId&&e("span",{style:{color:"red"},children:"Field is required"})]})}),s(o,{p:"1em",children:[e(p,{children:"Deshabilitar o habilitar"}),e(be,R(m({size:"sm",colorScheme:"red"},i("enabled")),{defaultChecked:Boolean(r.enabled)}))]}),e(M,{buttonstate:g==null?void 0:g.isLoading}),c&&e(W,{message:c})]})})})}const Ae=k.div`
  .form-title {
    color: #009966;
    margin: 2em 0;
    font-weight: bolder;
  }
`,p=k.h4`
  color: #888888;
  font-weight: bolder;
`;function ze(){const[n,r]=T.exports.useState(""),{register:t,handleSubmit:c,formState:{errors:a}}=O(),i="/users/enabled/true",I="/empresas-instituciones/",u="/representantes",{data:w}=_("users-enabled",()=>E(i)),{data:v}=_("companies",()=>E(I)),y=P(b=>we(u,b));return e(f,{children:s("form",{onSubmit:c(async b=>{y.mutateAsync(b)}),children:[e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nro de Carnet del representante"}),e(Z,{register:t,errors:a,required:!0,info:d.ci})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Tomo del representante"}),e(j,{label:"tome",register:t,errors:a,required:!0,info:d.tome})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Folio del representante"}),e(j,{label:"folio",register:t,errors:a,required:!0,info:d.folio})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nombre y apellidos de representante"}),e(B,{message:d.name,children:e(q,{label:"name",register:t,errors:a,required:!0,info:d.name})})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Tel\xE9fono del representante"}),e(Y,{label:"phone",register:t,errors:a,required:!0,info:d.tel})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Nombre y apellidos de quien lo nombra"}),e(q,{label:"namer",register:t,errors:a,required:!0,info:d.tutor})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Cargo del que lo nombra"}),e(q,{label:"namerCharge",register:t,errors:a,required:!0,info:d.occupancy})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Adjunte el documento del nombramiento"}),e(B,{message:d.file,children:e(x,m(m({list:"representantes"},t("nominationTemplate")),Q))}),e(F,{label:"nominationTemplate",errors:a})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:v==null?void 0:v.result,label:"eiId",register:t,required:!0}),a.eiId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(o,{p:"1em",children:s(l,{children:[e(h,{children:"Selecciona usuario al que se vincula"}),e(L,{list:w==null?void 0:w.result,label:"userId",register:t,required:!0}),a.userId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(M,{buttonstate:y==null?void 0:y.isLoading}),n&&e(W,{message:n})]})})}const h=k.h4`
  color: #888888;
  font-weight: bolder;
`,H=[{option:"a\xF1adir",icon:e(K,{}),comp:e(ze,{})},{option:"mostrar",icon:e(ge,{}),comp:e(de,{url:"representantes",queryKey:"agent-all"})},{option:"buscar",icon:e(ye,{}),comp:e(Se,{allnames:"representantes"})},{option:"habilitados",icon:e(le,{}),comp:e(ce,{queryKey:"agent-enabled",url:"representantes/enabled/true"})},{option:"asociado",icon:e(xe,{}),comp:e(qe,{path:"representantes/empresa-institucion",attached:"empresas-instituciones",queryKey:"func-reg"})},{option:"actualizar",icon:e(K,{}),comp:e(Fe,{})}];function Ye(){const n=localStorage.getItem("jwt");return T.exports.useEffect(()=>{n&&(he.defaults.headers.common.jwt=n)},[]),e(f,{children:s(Te,{children:[e(ae,{linear:ne.green,color:"#ffffff"}),e(ie,{children:e(se,{name:"representante",options:H,children:e(oe,{options:H})})})]})})}const Te=k.div`
  width: 100%;
  position: relative;
  background-color: #ffffff;
  .province {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .province__divider {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .bg-grey {
    background-color: #3a3839;
  }
  .btn-backwards {
    align-self: flex-start;
    display: flex;
    text-transform: uppercase;
    font-weight: bolder;
    color: #0660b1;
    margin: 1em;
    span {
      position: relative;
      top: 0.5rem;
      left: 1rem;
      color: #009fff;
    }
  }
  .btn-backwards__text {
    font-weight: bolder;
    position: relative;
    top: 8px;
    left: 5px;
  }
`;export{Ye as default};
